### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —à–∞–±–ª–æ–Ω –±–æ—Ç–∞ aiogram3

üëã **–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é**! –í –¥–∞–Ω–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –º–æ–π –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è —Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞ –Ω–∞ **Python** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:

- aiogram 3
- aiogram-dialog 2
- docker
- postgresql
- redis
- alembic

–ò–∑ **–ø–ª—é—Å–æ–≤** –¥–∞–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞, —è –º–æ–≥—É –≤—ã–¥–µ–ª–∏—Ç—å:

- –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –∫–æ–¥ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å.
- –ì–æ—Ç–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –º–∏–≥—Ä–∞—Ü–∏–π **alembic**.
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –¥–≤–∏–∂–æ–∫ –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö **postgresql**.
- **RedisStorage**, –±–æ—Ç –±—É–¥–µ—Ç –ø–æ–º–Ω–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –¥–∞–∂–µ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞.
- **aiogram-dialog** –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è **–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**.

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–æ–≤–æ–ª—å–Ω–æ **–ø—Ä–æ—Å—Ç–∞**, –≤–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–π **—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å **docker + docker-compose** –Ω–∞ —Å–≤–æ–π –ü–ö.

–î–∞–ª–µ–µ, —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª **.env** –≤ –ø–∞–ø–∫–µ **src**, –∏ –≤–Ω–µ—Å–∏—Ç–µ —Ç—É–¥–∞ —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:

```env
API_TOKEN=<—Ç–æ–∫–µ–Ω –±–æ—Ç–∞ —Ç—É—Ç>

POSTGRES_USER=cleanbot_user

POSTGRES_PASSWORD=<–≤–∞—à –ø–∞—Ä–æ–ª—å —Ç—É—Ç>

POSTGRES_DB=cleanbot_db

DB_HOST=db

DB_PORT=5432

DB_NAME=cleanbot_db

DB_USER=cleanbot_user

DB_PASS=<–≤–∞—à –ø–∞—Ä–æ–ª—å —Ç—É—Ç>
```

–î–∞–ª–µ–µ, —Å–æ–±–µ—Ä–∏—Ç–µ –æ–±—Ä–∞–∑:

```shell
docker-compose up --build
```

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ **bot** –∫–æ–º–∞–Ω–¥—É

```shell
alembic revision --autogenerate -m "init"
```

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞—á–∞–ª—å–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏, –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```shell
alembic upgrade head
```

–í—ã–∫–ª—é—á–∏—Ç—å –±–æ—Ç–∞:

```shell
docker-compose down -v
```